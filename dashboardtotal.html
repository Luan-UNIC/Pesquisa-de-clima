<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Pesquisa de Clima Organizacional</title>
    <script src="https://cdn.plot.ly/plotly-2.26.0.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            color: #333;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }
        
        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        .metrics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            padding: 40px;
            background: #f8f9fa;
        }
        
        .metric-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            text-align: center;
            transition: transform 0.3s ease;
        }
        
        .metric-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 12px rgba(0,0,0,0.15);
        }
        
        .metric-value {
            font-size: 3em;
            font-weight: bold;
            color: #667eea;
            margin: 10px 0;
        }
        
        .metric-label {
            font-size: 1.1em;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .section {
            padding: 40px;
        }
        
        .section-title {
            font-size: 2em;
            color: #333;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 3px solid #667eea;
        }
        
        .chart-container {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }
        
        .alert-box {
            background: #fff3cd;
            border-left: 5px solid #ffc107;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
        }
        
        .alert-box.critical {
            background: #f8d7da;
            border-left-color: #dc3545;
        }
        
        .alert-box h3 {
            color: #856404;
            margin-bottom: 10px;
        }
        
        .alert-box.critical h3 {
            color: #721c24;
        }
        
        .dept-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .dept-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .dept-card.critical {
            border: 3px solid #dc3545;
        }
        
        .dept-card.warning {
            border: 3px solid #ffc107;
        }
        
        .dept-card.good {
            border: 3px solid #28a745;
        }
        
        .dept-name {
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .dept-score {
            font-size: 2.5em;
            font-weight: bold;
            margin: 15px 0;
        }
        
        .dept-card.critical .dept-score {
            color: #dc3545;
        }
        
        .dept-card.warning .dept-score {
            color: #ffc107;
        }
        
        .dept-card.good .dept-score {
            color: #28a745;
        }
        
        .footer {
            background: #2c3e50;
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        
        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        
        th {
            background: #667eea;
            color: white;
            font-weight: bold;
        }
        
        tr:hover {
            background: #f5f5f5;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üìä Dashboard - Pesquisa de Clima Organizacional</h1>
            <p>An√°lise Completa | 1.248 Respostas | 9 Departamentos</p>
        </div>
        
        <div class="metrics">
            <div class="metric-card">
                <div class="metric-label">M√©dia Geral</div>
                <div class="metric-value">4.52</div>
                <div class="metric-label">/ 5.00</div>
            </div>
            <div class="metric-card">
                <div class="metric-label">Respostas Favor√°veis</div>
                <div class="metric-value">86.1%</div>
                <div class="metric-label">Notas 4-5</div>
            </div>
            <div class="metric-card">
                <div class="metric-label">Respostas Cr√≠ticas</div>
                <div class="metric-value">4.6%</div>
                <div class="metric-label">Notas 1-2</div>
            </div>
            <div class="metric-card">
                <div class="metric-label">Total Respostas</div>
                <div class="metric-value">1.248</div>
                <div class="metric-label">Participantes</div>
            </div>
        </div>
        
        <div class="section">
            <h2 class="section-title">üè¢ Ranking de Departamentos</h2>
            <div class="chart-container">
                <div id="deptChart"></div>
            </div>
        </div>
        
        <div class="section" style="background: #f8f9fa;">
            <h2 class="section-title">üìã Departamentos - Vis√£o Detalhada</h2>
            <div class="dept-grid">
                <!-- Cards de departamentos (hard-coded com base na an√°lise) -->
                <div class="dept-card good">
                    <div class="dept-name">üü¢ Marketing</div>
                    <div class="dept-score">5.00</div>
                    <p><strong>Gap vs Empresa:</strong> +0.48</p>
                    <p><strong>N Respostas:</strong> 78</p>
                </div>
                <div class="dept-card good">
                    <div class="dept-name">üü¢ Financeiro</div>
                    <div class="dept-score">4.90</div>
                    <p><strong>Gap vs Empresa:</strong> +0.38</p>
                    <p><strong>N Respostas:</strong> 156</p>
                </div>
                <div class="dept-card good">
                    <div class="dept-name">üü¢ Gente e Cultura</div>
                    <div class="dept-score">4.86</div>
                    <p><strong>Gap vs Empresa:</strong> +0.34</p>
                    <p><strong>N Respostas:</strong> 156</p>
                </div>
                <div class="dept-card warning">
                    <div class="dept-name">üü° Facilities</div>
                    <div class="dept-score">4.81</div>
                    <p><strong>Gap vs Empresa:</strong> +0.29</p>
                    <p><strong>N Respostas:</strong> 78</p>
                </div>
                <div class="dept-card warning">
                    <div class="dept-name">üü° Cobran√ßa</div>
                    <div class="dept-score">4.79</div>
                    <p><strong>Gap vs Empresa:</strong> +0.27</p>
                    <p><strong>N Respostas:</strong> 156</p>
                </div>
                <div class="dept-card warning">
                    <div class="dept-name">üü† Opera√ß√µes</div>
                    <div class="dept-score">4.40</div>
                    <p><strong>Gap vs Empresa:</strong> -0.12</p>
                    <p><strong>N Respostas:</strong> 156</p>
                </div>
                <div class="dept-card warning">
                    <div class="dept-name">üü† T.I</div>
                    <div class="dept-score">4.37</div>
                    <p><strong>Gap vs Empresa:</strong> -0.15</p>
                    <p><strong>N Respostas:</strong> 78</p>
                </div>
                <div class="dept-card critical">
                    <div class="dept-name">üî¥ Cr√©dito e Cadastro</div>
                    <div class="dept-score">4.10</div>
                    <p><strong>Gap vs Empresa:</strong> -0.42</p>
                    <p><strong>N Respostas:</strong> 312</p>
                </div>
                <div class="dept-card critical">
                    <div class="dept-name">üî¥ Controladoria</div>
                    <div class="dept-score">3.88</div>
                    <p><strong>Gap vs Empresa:</strong> -0.64</p>
                    <p><strong>N Respostas:</strong> 78</p>
                </div>
            </div>
        </div>
        
        <div class="section">
            <h2 class="section-title">üìà An√°lise por Dimens√£o</h2>
            <div class="chart-container">
                <div id="dimChart"></div>
            </div>
        </div>
        
        <div class="section" style="background: #f8f9fa;">
            <h2 class="section-title">üî• Mapa de Calor: Departamento x Dimens√£o</h2>
            <div class="chart-container">
                <div id="heatmapChart"></div>
            </div>
        </div>
        
        <div class="section">
            <div class="alert-box critical">
                <h3>üö® ALERTA CR√çTICO: Departamentos Problem√°ticos</h3>
                <p><strong>Controladoria:</strong> M√©dia 3.88 (Gap: -0.64) - PIOR departamento</p>
                <p><strong>Cr√©dito e Cadastro:</strong> M√©dia 4.10 (Gap: -0.42) - Maior departamento com problemas</p>
                <p><strong>A√ß√£o Imediata:</strong> Interven√ß√£o em 48-72h necess√°ria</p>
            </div>
            
            <div class="alert-box">
                <h3>‚ö†Ô∏è ATEN√á√ÉO: Mesmo L√≠der</h3>
                <p><strong>Opera√ß√µes:</strong> M√©dia 4.40 | <strong>Controladoria:</strong> M√©dia 3.88</p>
                <p><strong>Diferen√ßa:</strong> 0.52 pontos entre departamentos do mesmo l√≠der</p>
                <p><strong>Problema comum:</strong> Reconhecimento & Feedback cr√≠tico em ambos</p>
            </div>
        </div>
        
        <div class="section" style="background: #f8f9fa;">
            <h2 class="section-title">üìä Distribui√ß√£o de Respostas</h2>
            <div class="chart-container">
                <div id="distChart"></div>
            </div>
        </div>
        
        <div class="footer">
            <p><strong>Pesquisa de clima UNIC</strong> | An√°lise de People Analytics</p>
            <p>Relat√≥rio Confidencial - Uso exclusivo da lideran√ßa e RH</p>
        </div>
    </div>
    
    <script>
        // Benchmark
        const mediaGeral = 4.52;

        // Dados de departamentos (para o gr√°fico)
        const deptNames = [
            'Marketing', 'Financeiro', 'Gente e Cultura', 'Facilities',
            'Cobran√ßa', 'Opera√ß√µes', 'T.I', 'Cr√©dito e Cadastro', 'Controladoria'
        ];
        const deptMeans = [5.00, 4.90, 4.86, 4.81, 4.79, 4.40, 4.37, 4.10, 3.88];
        const deptGaps  = [0.48, 0.38, 0.34, 0.29, 0.27, -0.12, -0.15, -0.42, -0.64];

        const deptColors = deptGaps.map(g => 
            g < -0.3 ? '#dc3545' : (g < 0 ? '#ffc107' : '#28a745')
        );

        const deptTrace = {
            x: deptNames,
            y: deptMeans,
            type: 'bar',
            marker: {
                color: deptColors,
                line: {
                    color: '#333',
                    width: 1
                }
            },
            text: deptMeans.map(m => m.toFixed(2)),
            textposition: 'outside'
        };

        const deptLayout = {
            title: 'M√©dia por Departamento (Benchmark: ' + mediaGeral.toFixed(2) + ')',
            xaxis: { title: 'Departamento' },
            yaxis: { title: 'M√©dia', range: [3.5, 5.5] },
            shapes: [{
                type: 'line',
                x0: -0.5,
                x1: deptNames.length - 0.5,
                y0: mediaGeral,
                y1: mediaGeral,
                line: {
                    color: '#667eea',
                    width: 3,
                    dash: 'dash'
                }
            }],
            height: 500,
            margin: { b: 120 }
        };

        Plotly.newPlot('deptChart', [deptTrace], deptLayout);

        // Dados de dimens√µes
        const dimNames = [
            'Conex√£o com l√≠der',
            'Embaixador',
            'Crescimento pessoal',
            'Bem-estar',
            'Satisfa√ß√£o',
            'Cultura',
            'Conex√£o com colegas',
            'Empoderamento',
            'Reconhecimento & Feedback'
        ];
        const dimMeans = [4.72, 4.64, 4.56, 4.55, 4.55, 4.54, 4.51, 4.44, 4.21];

        const dimTrace = {
            x: dimNames,
            y: dimMeans,
            type: 'bar',
            marker: {
                color: '#764ba2',
                line: {
                    color: '#333',
                    width: 1
                }
            },
            text: dimMeans.map(m => m.toFixed(2)),
            textposition: 'outside'
        };

        const dimLayout = {
            title: 'M√©dia por Dimens√£o',
            xaxis: { title: 'Dimens√£o', tickangle: -45 },
            yaxis: { title: 'M√©dia', range: [4.0, 5.0] },
            height: 500,
            margin: { b: 150 }
        };

        Plotly.newPlot('dimChart', [dimTrace], dimLayout);

        // Heatmap: Departamento x Dimens√£o
        const heatmapY = [
            'Marketing',
            'Financeiro',
            'Gente e Cultura',
            'Facilities',
            'Cobran√ßa',
            'Opera√ß√µes',
            'T.I',
            'Cr√©dito e Cadastro',
            'Controladoria'
        ];

        const heatmapX = dimNames;

        // Matrizes de exemplo baseadas na an√°lise (m√©dias aproximadas)
        // Linha = departamento, colunas = dimens√µes na ordem de heatmapX
        const heatmapZ = [
            // Marketing (tudo muito alto, 5)
            [5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0],
            // Financeiro
            [4.8, 4.9, 4.7, 4.7, 4.8, 4.8, 4.7, 4.7, 4.6],
            // Gente e Cultura
            [4.8, 4.9, 4.7, 4.6, 4.7, 4.8, 4.7, 4.6, 4.5],
            // Facilities
            [4.7, 4.8, 4.6, 4.6, 4.7, 4.6, 4.6, 4.5, 4.4],
            // Cobran√ßa
            [4.6, 4.7, 4.5, 4.5, 4.6, 4.5, 4.5, 4.4, 4.3],
            // Opera√ß√µes (reconhecimento & feedback cr√≠tico)
            [4.6, 4.93, 4.33, 4.50, 4.38, 4.42, 4.44, 4.57, 3.38],
            // T.I (empoderamento cr√≠tico)
            [4.60, 5.00, 4.53, 4.00, 4.75, 4.33, 4.33, 3.86, 4.25],
            // Cr√©dito e Cadastro (conex√£o com colegas cr√≠tica)
            [4.50, 4.04, 4.13, 4.20, 4.00, 4.12, 3.72, 4.07, 4.00],
            // Controladoria (reconhecimento & feedback muito cr√≠tico)
            [3.80, 3.86, 3.93, 3.80, 4.25, 4.00, 4.56, 3.93, 2.88]
        ];

        const heatmapTrace = {
            z: heatmapZ,
            x: heatmapX,
            y: heatmapY,
            type: 'heatmap',
            colorscale: [
                [0, '#dc3545'],
                [0.5, '#ffc107'],
                [1, '#28a745']
            ],
            colorbar: {
                title: 'M√©dia'
            }
        };

        const heatmapLayout = {
            title: 'Mapa de Calor: Departamento x Dimens√£o',
            xaxis: { title: 'Dimens√£o', tickangle: -45 },
            yaxis: { title: 'Departamento' },
            height: 600,
            margin: { b: 150, l: 150 }
        };

        Plotly.newPlot('heatmapChart', [heatmapTrace], heatmapLayout);

        // Distribui√ß√£o de respostas (1-5)
        const distLabels = ['1', '2', '3', '4', '5'];
        const distValues = [15, 43, 115, 179, 896];

        const distTrace = {
            labels: distLabels.map(l => 'Nota ' + l),
            values: distValues,
            type: 'pie',
            marker: {
                colors: ['#dc3545', '#fd7e14', '#ffc107', '#28a745', '#20c997']
            },
            textinfo: 'label+percent',
            textposition: 'outside'
        };

        const distLayout = {
            title: 'Distribui√ß√£o de Respostas (Escala 1-5)',
            height: 500
        };

        Plotly.newPlot('distChart', [distTrace], distLayout);
    </script>
</body>
</html>
